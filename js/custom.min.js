// ALL SLIDERS

function allSliders() {

    var helpingSlider = new Swiper(".helpingSlider", {
        loop: true,
        autoplay: true,
        slidesPerView: 1,
        spaceBetween: 10,
        // If we need pagination

        breakpoints: {
            1024: {
                slidesPerView: 3,
                spaceBetween: 20,
            },
            768: {
                slidesPerView: 3,
                spaceBetween: 20,
            },
            640: {
                slidesPerView: 2,
                spaceBetween: 10,
            },
            576: {
                slidesPerView: 1,
                spaceBetween: 10,
            },
            375: {
                slidesPerView: 1,
                spaceBetween: 10,
            },
        },

        // Navigation arrows
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });

    var aboutSlider = new Swiper('.aboutSlider', {
        loop: true,
        speed: 1000,
        autoplay: {
            delay: 3000,
        },
        effect: 'coverflow',
        grabCursor: true,
        centeredSlides: true,
        slidesPerView: 'auto',
        coverflowEffect: {
            rotate: 0,
            stretch: 80,
            depth: 200,
            modifier: 1,
            slideShadows: false,
        },
    })

    var customerSlider = new Swiper(".customerSlider", {
        loop: true,
        slidesPerView: 1,
        spaceBetween: 10,
        // If we need pagination

        breakpoints: {
            1024: {
                slidesPerView: 2,
                spaceBetween: 40,
            },
            768: {
                slidesPerView: 2,
                spaceBetween: 20,
            },
            640: {
                slidesPerView: 1,
                spaceBetween: 10,
            },
            576: {
                slidesPerView: 1,
                spaceBetween: 10,
            },
            375: {
                slidesPerView: 1,
                spaceBetween: 10,
            },
        },
        navigation: {
            nextEl: ".swiper-button-next",
            prevEl: ".swiper-button-prev",
        },
    });

}

// GSAP PRELOADER

function preLoader() {
    const tl = gsap.timeline({ duration: 0.1 });
    tl.to(".preLoader.black > img", {
            y: 50,
            autoAlpha: 0,
        })
        .to(".preLoader.black", {
            yPercent: -100,
        })
        .to(".preLoader.white", {
            yPercent: -100,
        })
        .to(".preLoader", {
            css: { display: "none", },
        })
        .from(".helpingContent", {
            y: -50,
            autoAlpha: 0,
        })
        .from(".navbar-brand > img", {
            x: -50,
            autoAlpha: 0,
        }, "-=1")
        .from(".navbar-nav > li, .form-inline", {
            autoAlpha: 0,
            x: 100,
            stagger: 0.05,
        }, "-=1")

}

//  CUSTOM MOUSE CURSOR

function mouseCursor() {
    if (document.querySelector(".cursor-inner") || document.querySelector(".cursor-outer")) {
        const cursorInner = document.querySelector(".cursor-inner");
        const cursorOuter = document.querySelector(".cursor-outer");
        let mouseX = 0;
        let mouseY = 0;
        let isHovering = false;

        window.addEventListener("mousemove", function(event) {
            if (!isHovering) {
                gsap.to(cursorOuter, {
                    x: event.clientX,
                    y: event.clientY,
                });
            }
            gsap.to(cursorInner, {
                x: event.clientX,
                y: event.clientY,
            });
            mouseY = event.clientY;
            mouseX = event.clientX;
        });

        const elementsToTrack = document.querySelectorAll("a, img, .cursor-pointer");
        elementsToTrack.forEach((element) => {
            element.addEventListener("mouseenter", function() {
                cursorInner.classList.add("cursor-hover");
                cursorOuter.classList.add("cursor-hover");
                isHovering = true;
            });

            element.addEventListener("mouseleave", function() {
                if (!(
                        element.tagName === "A" ||
                        element.tagName === "IMG" ||
                        element.closest(".cursor-pointer")
                    )) {
                    cursorInner.classList.remove("cursor-hover");
                    cursorOuter.classList.remove("cursor-hover");
                }
                isHovering = false;
            });
        });

        gsap.set(cursorInner, { visibility: "visible" });
        gsap.set(cursorOuter, { visibility: "visible" });
    }
}

// ANCHOR VOID MANIPULATE #

function replaceHash() {
    document.querySelectorAll("a").forEach((a) => {
        let href = a.getAttribute("href");
        a.href = href ?
            href.startsWith("#") && href.endsWith("#") ?
            href.replace("#", "javascript:;") :
            href :
            "javascript:;";
    });
}

// GSAP HEADING ANIMATION

function counters() {
    $('.counter-count').each(function() {
        $(this).prop('Counter', 0).animate({
            Counter: $(this).text()
        }, {

            //chnage count up speed here
            duration: 4000,
            easing: 'swing',
            step: function(now) {
                $(this).text(Math.ceil(now));
            }
        });
    });
}

// LENIS SETUP

function lenissetup() {
    const lenis = new Lenis()

    function raf(time) {
        lenis.raf(time)
        requestAnimationFrame(raf)
    }
    requestAnimationFrame(raf)
}

// Function Initialization
function initializeFunctions() {
    preLoader();
    allSliders();
    mouseCursor();
    replaceHash();
    counters()

    // LENIS 
    lenissetup();

    // AOS INIT
    AOS.init({
        duration: 1200,
        disable: 'mobile'
    });
}

// Event listener for window load
window.addEventListener("load", initializeFunctions);